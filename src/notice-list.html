<!-- @layout layouts/sub.html -->
<section data-layout="sublayout" data-page="notice">
    <div class="container">
        <h1 class="page-title">공지사항</h1>

        <div class="search-form">
            <div class="search-row">
                <select class="krds-form-select">
                    <option value="">전체</option>
                    <option value="">제목</option>
                    <option value="">내용</option>
                </select>
                <input type="text" placeholder="제목을 입력해주세요" class="krds-input">
                <button type="button" class="krds-btn medium"><i class="icon ico-search" aria-hidden="true"></i>검색</button>
            </div>
        </div>

        <div class="search-list-top">
            <ul class="sch-info" aria-live="polite">
              <li>검색 결과 <span class="point">24</span>개</li>
            </ul>
            <ul class="sch-sort">
              <li>
                <strong class="sort-label"><label for="sort">정렬기준</label></strong>
                <div class="w-sort-btn">
                  <button type="button" class="active">관련도순</button>
                  <button type="button">최신순</button>
                </div>
                <div class="m-sort-btn">
                <select class="krds-form-select-sort" id="sort">
                    <option>관련도순</option>
                    <option>최신순</option>
                    <option>인기순</option>
                </select>
                </div>
              </li>
            </ul>
          </div>
        <div class="board-list">
            
            <div class="board-list__body">
                <table>
                    <colgroup>
                        <col style="width: auto;">
                        <col style="width: 15%;">
                        <col style="width: 15%;">
                        <col style="width: 15%;">
                    </colgroup>
                    <thead>
                        <tr>
                            <th scope="col">제목</th>
                            <th scope="col">파일</th>
                            <th scope="col">등록일</th>
                            <th scope="col">조회수</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-left"><a href="#" class="ellipsis">2024년 해사안전 우수사업자 지정 운영 안내</a></td>
                            <td>
                                <span aria-label="첨부 파일 있음" class="board-list__file-icon">
                                    <i class="ico-file" aria-hidden="true"></i>
                                </span>
                            </td>
                            <td>2025년 6월 21일</td>
                            <td>2483</td>
                        </tr>
                        <tr>
                            <td class="text-left"><a href="#" class="ellipsis">2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자
                                    지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영
                                    안내2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내2024년
                                    해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내2024년 해사안전
                                    우수사업자 지정 운영 안내2024년 해사안전 우수사업자 지정 운영 안내</a></td>
                            <td>
                                <!-- 파일 없을시나 항목 없을시 무조건 없다는 표시가 들어가야합니다. -->
                                <span aria-label="첨부 파일 없음" class="board-list__file-icon">-</span>
                            </td>
                            <td>2025년 6월 21일</td>
                            <td>2483</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- //board-list__body -->

            <div class="board-list__footer">
                {{> Pagination}}
            </div>
            <!-- //board-list__footer -->
        </div>
        <!-- //board-list -->
    </div>
</section>
<script>
    // 모바일에서 테이블 td에 th 제목 추가
    function addLabelsToTable() {
        const tables = document.querySelectorAll('.board-list__body table');

        tables.forEach(table => {
            const thead = table.querySelector('thead');
            const tbody = table.querySelector('tbody');

            if (!thead || !tbody) return;

            // 헤더 텍스트 가져오기 (번호 제외)
            const headers = Array.from(thead.querySelectorAll('th')).slice(1).map(th => th.textContent.trim());

            // 각 행의 td에 라벨 추가 (번호 제외)
            tbody.querySelectorAll('tr').forEach(row => {
                const cells = Array.from(row.querySelectorAll('td')).slice(1); // 번호 제외

                cells.forEach((cell, index) => {
                    if (index < headers.length) {
                        const originalContent = cell.innerHTML;
                        cell.innerHTML = `<span class="mobile-label">${headers[index]}:</span> ${originalContent}`;
                    }
                });
            });
        });
    }

    // 화면 크기에 따라 라벨 표시/숨김
    function handleResize() {
        const isMobile = window.innerWidth <= 768;
        const mobileLabels = document.querySelectorAll('.mobile-label');

        mobileLabels.forEach(label => {
            label.style.display = isMobile ? 'inline' : 'none';
        });
    }

    // 초기 실행
    document.addEventListener('DOMContentLoaded', function () {
        addLabelsToTable();
        handleResize();
    });

    // 리사이즈 이벤트
    window.addEventListener('resize', handleResize);
</script>